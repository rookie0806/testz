{"ast":null,"code":"import _classCallCheck from\"C:/Users/devgu/sohee/sohee/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/devgu/sohee/sohee/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/devgu/sohee/sohee/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/devgu/sohee/sohee/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Main from\"./presenter\";import test1 from\"./test_1.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";var Container=/*#__PURE__*/function(_Component){_inherits(Container,_Component);var _super=_createSuper(Container);function Container(){var _this;_classCallCheck(this,Container);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,loading2:true,idx:1,page:[1],maxpage:0};_this.componentWillReceiveProps=function(nextProps){var data=_this.props.data;if(nextProps.data&&nextProps.xy){//console.log(nextProps.data,\"dd\");\n//console.log(nextProps.xy,\"xx\");\n_this.draw(nextProps.data,nextProps.xy);}};return _this;}_createClass(Container,[{key:\"draw\",value:function draw(data,xy){var canvas=document.getElementsByTagName('canvas')[0];canvas.width=document.body.clientWidth;canvas.height=window.innerHeight;var image=new Array();for(var i=0;i<data.length;i++){image[i]=new Image();image[i].src=data[i][\"image\"];}console.log(image);var timerId=\"\";var first=true;var ctx=canvas.getContext('2d');trackTransforms(ctx);var scale=ctx.scale;var imagearray=[];var maxarray_x=[];var maxarray_y=[];var randomimage=[];var y=0;var zoomscale=0;var firstx=0;var gappos_x=0;var gappos_y=0;var firsty=0;function redraw(){// Clear the entire canvas\nvar p1=ctx.transformedPoint(0,0);var p2=ctx.transformedPoint(canvas.width,canvas.height);ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);// Alternatively:\n// ctx.save();\n// ctx.setTransform(1,0,0,1,0,0);\n// ctx.clearRect(0,0,canvas.width,canvas.height);\n// ctx.restore();\nif(first){for(var i=0;i<xy.length;i++){imagearray.push([xy[i].x,xy[i].y]);maxarray_x.push(xy[i].x);maxarray_y.push(xy[i].y);var randompick=makeRandom(0,data.length-1);randomimage.push(randompick);}var max_x=Math.max.apply(null,maxarray_x);var max_y=Math.max.apply(null,maxarray_y);var min_y=Math.min.apply(null,maxarray_y);y=document.body.clientHeight-(max_y*(3000/max_x*(document.body.clientWidth/3168))+min_y*(3000/max_x*(document.body.clientWidth/3168)))-50;first=false;scale=3000/max_x*(document.body.clientWidth/3168);zoomscale=scale;firstx=imagearray[0][0]*scale;firsty=imagearray[0][1]*scale;}ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);function makeRandom(min,max){var RandVal=Math.floor(Math.random()*(max-min+1))+min;return RandVal;}//console.log(imagearray.length);\nfor(i=0;i<imagearray.length;i++){ctx.drawImage(image[randomimage[i]],imagearray[i][0]*scale,imagearray[i][1]*scale+y/2,scale,scale);}//\n}canvas.addEventListener('dblclick',function(){var rect=canvas.getBoundingClientRect();var pt=ctx.transformedPoint(lastX,lastY);for(var i=0;i<imagearray.length;i++){if(pt.x<imagearray[i][0]*scale+scale&&pt.x>imagearray[i][0]*scale){if(pt.y<imagearray[i][1]*scale+y/2+scale&&pt.y>imagearray[i][1]*scale+y/2){window.open(data[randomimage[i]][\"url\"],'_blank');}}}});var lastX=canvas.width/2,lastY=canvas.height/2;var dragStart,dragged;canvas.addEventListener('mousedown',function(evt){document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect='none';lastX=evt.offsetX||evt.pageX-canvas.offsetLeft;lastY=evt.offsetY||evt.pageY-canvas.offsetTop;dragStart=ctx.transformedPoint(lastX,lastY);gappos_x=lastX-firstx;gappos_y=lastY-firsty;dragged=false;},false);canvas.addEventListener('mousemove',function(evt){lastX=evt.offsetX||evt.pageX-canvas.offsetLeft;lastY=evt.offsetY||evt.pageY-canvas.offsetTop;dragged=true;if(dragStart){var pt=ctx.transformedPoint(lastX,lastY);ctx.translate(pt.x-dragStart.x,pt.y-dragStart.y);redraw();clearTimeout(timerId);}},false);canvas.addEventListener('mouseup',function(evt){dragStart=null;},false);var scaleFactor=1.1;var zoom=function zoom(clicks){var pt=ctx.transformedPoint(lastX,lastY);ctx.translate(pt.x,pt.y);var factor=Math.pow(scaleFactor,clicks);zoomscale=zoomscale*factor;ctx.scale(factor,factor);ctx.translate(-pt.x,-pt.y);redraw();clearTimeout(timerId);};var handleScroll=function handleScroll(evt){var delta=evt.wheelDelta?evt.wheelDelta/40:evt.detail?-evt.detail:0;if(delta)zoom(delta);clearTimeout(timerId);return evt.preventDefault()&&false;};canvas.addEventListener('DOMMouseScroll',handleScroll,false);canvas.addEventListener('mousewheel',handleScroll,false);// Adds ctx.getTransform() - returns an SVGMatrix\n// Adds ctx.transformedPoint(x,y) - returns an SVGPoint\nfunction trackTransforms(ctx){var svg=document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');var xform=svg.createSVGMatrix();ctx.getTransform=function(){return xform;};var savedTransforms=[];var save=ctx.save;ctx.save=function(){savedTransforms.push(xform.translate(0,0));return save.call(ctx);};var restore=ctx.restore;ctx.restore=function(){xform=savedTransforms.pop();return restore.call(ctx);};var scale=ctx.scale;ctx.scale=function(sx,sy){xform=xform.scaleNonUniform(sx,sy);return scale.call(ctx,sx,sy);};var rotate=ctx.rotate;ctx.rotate=function(radians){xform=xform.rotate(radians*180/Math.PI);return rotate.call(ctx,radians);};var translate=ctx.translate;ctx.translate=function(dx,dy){xform=xform.translate(dx,dy);return translate.call(ctx,dx,dy);};var transform=ctx.transform;ctx.transform=function(a,b,c,d,e,f){var m2=svg.createSVGMatrix();m2.a=a;m2.b=b;m2.c=c;m2.d=d;m2.e=e;m2.f=f;xform=xform.multiply(m2);return transform.call(ctx,a,b,c,d,e,f);};var setTransform=ctx.setTransform;ctx.setTransform=function(a,b,c,d,e,f){xform.a=a;xform.b=b;xform.c=c;xform.d=d;xform.e=e;xform.f=f;return setTransform.call(ctx,a,b,c,d,e,f);};var pt=svg.createSVGPoint();ctx.transformedPoint=function(x,y){pt.x=x;pt.y=y;return pt.matrixTransform(xform.inverse());};}function StartClock(){redraw();timerId=setTimeout(redraw,500);}StartClock();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this$props=this.props,getData=_this$props.getData,getXY=_this$props.getXY;getXY();getData();//console.log(this.props);\n}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Main,{});}}]);return Container;}(Component);export default Container;","map":{"version":3,"sources":["C:/Users/devgu/sohee/sohee/frontend/src/components/Main/container.js"],"names":["React","Component","Main","test1","Container","state","loading","loading2","idx","page","maxpage","componentWillReceiveProps","nextProps","data","props","xy","draw","canvas","document","getElementsByTagName","width","body","clientWidth","height","window","innerHeight","image","Array","i","length","Image","src","console","log","timerId","first","ctx","getContext","trackTransforms","scale","imagearray","maxarray_x","maxarray_y","randomimage","y","zoomscale","firstx","gappos_x","gappos_y","firsty","redraw","p1","transformedPoint","p2","clearRect","x","push","randompick","makeRandom","max_x","Math","max","apply","max_y","min_y","min","clientHeight","RandVal","floor","random","drawImage","addEventListener","rect","getBoundingClientRect","pt","lastX","lastY","open","dragStart","dragged","evt","style","mozUserSelect","webkitUserSelect","userSelect","offsetX","pageX","offsetLeft","offsetY","pageY","offsetTop","translate","clearTimeout","scaleFactor","zoom","clicks","factor","pow","handleScroll","delta","wheelDelta","detail","preventDefault","svg","createElementNS","xform","createSVGMatrix","getTransform","savedTransforms","save","call","restore","pop","sx","sy","scaleNonUniform","rotate","radians","PI","dx","dy","transform","a","b","c","d","e","f","m2","multiply","setTransform","createSVGPoint","matrixTransform","inverse","StartClock","setTimeout","getData","getXY"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Main from \"./presenter\";\r\nimport test1 from \"./test_1.jpg\";\r\nclass Container extends Component {\r\n\r\n  state = {\r\n    loading: true,\r\n    loading2: true,\r\n    idx : 1,\r\n    page : [1], \r\n    maxpage : 0,\r\n  };\r\n  static propTypes = {\r\n    data: PropTypes.array,\r\n    xy :  PropTypes.array,\r\n    getXY : PropTypes.func.isRequired,\r\n    getData: PropTypes.func.isRequired,\r\n  };\r\n  \r\n  draw(data,xy) {\r\n          var canvas = document.getElementsByTagName('canvas')[0];\r\n          canvas.width = document.body.clientWidth ; canvas.height = window.innerHeight;\r\n          var image = new Array()\r\n          for (var i = 0; i < data.length; i++) {\r\n              image[i] = new Image()\r\n              image[i].src = data[i][\"image\"]\r\n          }\r\n          console.log(image);\r\n          var timerId = \"\";\r\n\r\n            var first = true;\r\n            \r\n            \r\n            var ctx = canvas.getContext('2d');\r\n            trackTransforms(ctx);\r\n                var scale = ctx.scale;\r\n                var imagearray = [];\r\n                var maxarray_x = [];\r\n                var maxarray_y = [];\r\n                var randomimage = [];\r\n                var y = 0;\r\n                var zoomscale = 0;\r\n                var firstx = 0;\r\n                var gappos_x  = 0;\r\n                var gappos_y = 0;\r\n                var firsty = 0;\r\n          function redraw(){\r\n            // Clear the entire canvas\r\n            var p1 = ctx.transformedPoint(0,0);\r\n            var p2 = ctx.transformedPoint(canvas.width,canvas.height);\r\n                  \r\n            ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);\r\n                  \r\n            // Alternatively:\r\n            // ctx.save();\r\n            // ctx.setTransform(1,0,0,1,0,0);\r\n            // ctx.clearRect(0,0,canvas.width,canvas.height);\r\n            // ctx.restore();\r\n                  if(first){\r\n                      for(var i=0;i<xy.length;i++){\r\n                            imagearray.push([xy[i].x,xy[i].y]);\r\n                            maxarray_x.push(xy[i].x);\r\n                            maxarray_y.push(xy[i].y);\r\n                            var randompick = makeRandom(0,data.length-1);\r\n                            randomimage.push(randompick);        \r\n                      }\r\n                      var max_x = Math.max.apply(null,maxarray_x);\r\n                      var max_y = Math.max.apply(null,maxarray_y);\r\n                      var min_y = Math.min.apply(null,maxarray_y);\r\n                      y = document.body.clientHeight- ((max_y*(3000/max_x*(document.body.clientWidth/3168)))+  (min_y*(3000/max_x*(document.body.clientWidth/3168)))) -50 ;\r\n                      first=false;\r\n                      scale = 3000/max_x*(document.body.clientWidth/3168);\r\n                      zoomscale = scale;\r\n                      firstx = imagearray[0][0]*scale;\r\n                      firsty = imagearray[0][1]*scale;\r\n                  }\r\n                  ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);\r\n                  function makeRandom(min, max){\r\n                      var RandVal = Math.floor(Math.random()*(max-min+1)) + min;\r\n                      return RandVal;\r\n                  }\r\n                  //console.log(imagearray.length);\r\n                  for(i=0;i<imagearray.length;i++)\r\n                  {\r\n                    ctx.drawImage(image[randomimage[i]],imagearray[i][0]*scale,imagearray[i][1]*scale+y/2,scale,scale);\r\n                  }\r\n                  \r\n                      \r\n            //\r\n          }\r\n          \r\n          canvas.addEventListener('dblclick', function(){ \r\n      \r\n                  var rect = canvas.getBoundingClientRect();\r\n                  var pt = ctx.transformedPoint(lastX,lastY);\r\n                  for(var i=0;i<imagearray.length;i++)\r\n                  {\r\n                      if(pt.x<imagearray[i][0]*scale+scale && pt.x>imagearray[i][0]*scale){\r\n                          if(pt.y<imagearray[i][1]*scale+y/2+scale && pt.y>imagearray[i][1]*scale+y/2){\r\n                            window.open(data[randomimage[i]][\"url\"], '_blank');\r\n                          }\r\n                      }\r\n                  }\r\n      \r\n              });\r\n          var lastX=canvas.width/2, lastY=canvas.height/2;\r\n          var dragStart,dragged;\r\n          canvas.addEventListener('mousedown',function(evt){\r\n            document.body.style.mozUserSelect = document.body.style.webkitUserSelect = document.body.style.userSelect = 'none';\r\n            lastX = evt.offsetX || (evt.pageX - canvas.offsetLeft);\r\n            lastY = evt.offsetY || (evt.pageY - canvas.offsetTop);\r\n            dragStart = ctx.transformedPoint(lastX,lastY);\r\n                  gappos_x = lastX - firstx;\r\n                  gappos_y = lastY - firsty;\r\n            dragged = false;\r\n          },false);\r\n          canvas.addEventListener('mousemove',function(evt){\r\n            lastX = evt.offsetX || (evt.pageX - canvas.offsetLeft);\r\n            lastY = evt.offsetY || (evt.pageY - canvas.offsetTop);\r\n            dragged = true;\r\n            if (dragStart){\r\n              var pt = ctx.transformedPoint(lastX,lastY);\r\n              ctx.translate(pt.x-dragStart.x,pt.y-dragStart.y);\r\n              redraw();\r\n              clearTimeout(timerId);\r\n            }\r\n          },false);\r\n          canvas.addEventListener('mouseup',function(evt){\r\n            dragStart = null;\r\n      \r\n          },false);\r\n      \r\n          var scaleFactor = 1.1;\r\n              \r\n          var zoom = function(clicks){\r\n            var pt = ctx.transformedPoint(lastX,lastY);\r\n            ctx.translate(pt.x,pt.y);\r\n            var factor = Math.pow(scaleFactor,clicks);\r\n                  zoomscale = zoomscale * factor;\r\n            ctx.scale(factor,factor);\r\n            ctx.translate(-pt.x,-pt.y);\r\n            redraw();\r\n            clearTimeout(timerId);\r\n          }\r\n              \r\n          var handleScroll = function(evt){\r\n                  \r\n            var delta = evt.wheelDelta ? evt.wheelDelta/40 : evt.detail ? -evt.detail : 0;\r\n                  \r\n            if (delta) zoom(delta);\r\n            clearTimeout(timerId);\r\n            return evt.preventDefault() && false;\r\n            \r\n                  \r\n          };\r\n          canvas.addEventListener('DOMMouseScroll',handleScroll,false);\r\n          canvas.addEventListener('mousewheel',handleScroll,false);\r\n        \r\n        \r\n        // Adds ctx.getTransform() - returns an SVGMatrix\r\n        // Adds ctx.transformedPoint(x,y) - returns an SVGPoint\r\n        function trackTransforms(ctx){\r\n          var svg = document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');\r\n          var xform = svg.createSVGMatrix();\r\n          ctx.getTransform = function(){ return xform; };\r\n          \r\n          var savedTransforms = [];\r\n          var save = ctx.save;\r\n          ctx.save = function(){\r\n            savedTransforms.push(xform.translate(0,0));\r\n            return save.call(ctx);\r\n          };\r\n          var restore = ctx.restore;\r\n          ctx.restore = function(){\r\n            xform = savedTransforms.pop();\r\n            return restore.call(ctx);\r\n          };\r\n      \r\n          var scale = ctx.scale;\r\n          ctx.scale = function(sx,sy){\r\n            xform = xform.scaleNonUniform(sx,sy);\r\n            return scale.call(ctx,sx,sy);\r\n          };\r\n          var rotate = ctx.rotate;\r\n          ctx.rotate = function(radians){\r\n            xform = xform.rotate(radians*180/Math.PI);\r\n            return rotate.call(ctx,radians);\r\n          };\r\n          var translate = ctx.translate;\r\n          ctx.translate = function(dx,dy){\r\n            xform = xform.translate(dx,dy);\r\n            return translate.call(ctx,dx,dy);\r\n          };\r\n          var transform = ctx.transform;\r\n          ctx.transform = function(a,b,c,d,e,f){\r\n            var m2 = svg.createSVGMatrix();\r\n            m2.a=a; m2.b=b; m2.c=c; m2.d=d; m2.e=e; m2.f=f;\r\n            xform = xform.multiply(m2);\r\n            return transform.call(ctx,a,b,c,d,e,f);\r\n          };\r\n          var setTransform = ctx.setTransform;\r\n          ctx.setTransform = function(a,b,c,d,e,f){\r\n            xform.a = a;\r\n            xform.b = b;\r\n            xform.c = c;\r\n            xform.d = d;\r\n            xform.e = e;\r\n            xform.f = f;\r\n            return setTransform.call(ctx,a,b,c,d,e,f);\r\n          };\r\n          var pt  = svg.createSVGPoint();\r\n          ctx.transformedPoint = function(x,y){\r\n            pt.x=x; pt.y=y;\r\n            return pt.matrixTransform(xform.inverse());\r\n          }\r\n        }\r\n        function StartClock() {\r\n      \r\n          redraw();\r\n      \r\n          timerId = setTimeout(redraw, 500);\r\n      \r\n        }\r\n        StartClock();\r\n        \r\n        }\r\n\r\n    componentWillReceiveProps = nextProps => {\r\n      const { data } = this.props;\r\n      if ( nextProps.data && nextProps.xy) {\t\r\n          //console.log(nextProps.data,\"dd\");\r\n          //console.log(nextProps.xy,\"xx\");\r\n          this.draw(nextProps.data,nextProps.xy);\r\n      }\r\n    };\r\n  \r\n\r\n  componentDidMount() {\r\n    const { getData,getXY } = this.props;\r\n    getXY();\r\n    getData();\r\n    //console.log(this.props);\r\n    \r\n};\r\n  render() {\r\n    \r\n    return (\r\n      <Main/>\r\n      \r\n    );\r\n    \r\n  }\r\n}\r\n\r\nexport default Container;"]},"metadata":{},"sourceType":"module"}