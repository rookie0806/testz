{"ast":null,"code":"import _classCallCheck from\"C:/Users/devgu/sohee/sohee/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/devgu/sohee/sohee/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/devgu/sohee/sohee/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/devgu/sohee/sohee/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Main from\"./presenter\";import test1 from\"./test_1.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";var Container=/*#__PURE__*/function(_Component){_inherits(Container,_Component);var _super=_createSuper(Container);function Container(){var _this;_classCallCheck(this,Container);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,loading2:true,idx:1,page:[1],maxpage:0};_this.componentWillReceiveProps=function(nextProps){var data=_this.props.data;if(nextProps.data){_this.draw(nextProps.data,nextProps.text);}};return _this;}_createClass(Container,[{key:\"draw\",value:function draw(data,text){var canvas=document.getElementsByTagName('canvas')[0];canvas.width=document.body.clientWidth;canvas.height=window.innerHeight;var image=new Array();for(var i=0;i<data.length;i++){image[i]=new Image();image[i].src=data[i][\"image\"];}var timerId=\"\";var first=true;var ctx=canvas.getContext('2d');trackTransforms(ctx);var scale=ctx.scale;var imagearray=[];var maxarray_x=[];var maxarray_y=[];var randomimage=[];var y=0;var zoomscale=0;var firstx=0;var gappos_x=0;var gappos_y=0;var firsty=0;function redraw(){// Clear the entire canvas\nvar p1=ctx.transformedPoint(0,0);var p2=ctx.transformedPoint(canvas.width,canvas.height);ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);// Alternatively:\n// ctx.save();\n// ctx.setTransform(1,0,0,1,0,0);\n// ctx.clearRect(0,0,canvas.width,canvas.height);\n// ctx.restore();\nif(first){ctx.font='70px Calibri';ctx.fillText(text.text,0,70,1000);for(var i=0;i<1000;i++){for(var j=0;j<1000;j++){if(ctx.getImageData(i,j,1,1).data[3]==255){//console.log(i,j);\nimagearray.push([i,j]);maxarray_x.push(i);maxarray_y.push(j);var randompick=makeRandom(1,data.length-1);randomimage.push(randompick);}}}var max_x=Math.max.apply(null,maxarray_x);var max_y=Math.max.apply(null,maxarray_y);var min_y=Math.min.apply(null,maxarray_y);y=document.body.clientHeight-(max_y*(3000/max_x*(document.body.clientWidth/3168))+min_y*(3000/max_x*(document.body.clientWidth/3168)))-50;first=false;scale=3000/max_x*(document.body.clientWidth/3168);zoomscale=scale;firstx=imagearray[0][0]*scale;firsty=imagearray[0][1]*scale;}ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);function makeRandom(min,max){var RandVal=Math.floor(Math.random()*(max-min+1))+min;return RandVal;}console.log(imagearray.length);for(i=0;i<imagearray.length;i++){ctx.drawImage(image[randomimage[i]],imagearray[i][0]*scale,imagearray[i][1]*scale+y/2,scale,scale);}//\n}canvas.addEventListener('dblclick',function(){var rect=canvas.getBoundingClientRect();var pt=ctx.transformedPoint(lastX,lastY);for(var i=0;i<imagearray.length;i++){if(pt.x<imagearray[i][0]*scale+scale&&pt.x>imagearray[i][0]*scale){if(pt.y<imagearray[i][1]*scale+y/2+scale&&pt.y>imagearray[i][1]*scale+y/2){window.open(data[randomimage[i]][\"url\"],'_blank');}}}});var lastX=canvas.width/2,lastY=canvas.height/2;var dragStart,dragged;canvas.addEventListener('mousedown',function(evt){document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect='none';lastX=evt.offsetX||evt.pageX-canvas.offsetLeft;lastY=evt.offsetY||evt.pageY-canvas.offsetTop;dragStart=ctx.transformedPoint(lastX,lastY);gappos_x=lastX-firstx;gappos_y=lastY-firsty;dragged=false;},false);canvas.addEventListener('mousemove',function(evt){lastX=evt.offsetX||evt.pageX-canvas.offsetLeft;lastY=evt.offsetY||evt.pageY-canvas.offsetTop;dragged=true;if(dragStart){var pt=ctx.transformedPoint(lastX,lastY);ctx.translate(pt.x-dragStart.x,pt.y-dragStart.y);redraw();clearTimeout(timerId);}},false);canvas.addEventListener('mouseup',function(evt){dragStart=null;},false);var scaleFactor=1.1;var zoom=function zoom(clicks){var pt=ctx.transformedPoint(lastX,lastY);ctx.translate(pt.x,pt.y);var factor=Math.pow(scaleFactor,clicks);zoomscale=zoomscale*factor;ctx.scale(factor,factor);ctx.translate(-pt.x,-pt.y);redraw();clearTimeout(timerId);};var handleScroll=function handleScroll(evt){var delta=evt.wheelDelta?evt.wheelDelta/40:evt.detail?-evt.detail:0;if(delta)zoom(delta);clearTimeout(timerId);return evt.preventDefault()&&false;};canvas.addEventListener('DOMMouseScroll',handleScroll,false);canvas.addEventListener('mousewheel',handleScroll,false);// Adds ctx.getTransform() - returns an SVGMatrix\n// Adds ctx.transformedPoint(x,y) - returns an SVGPoint\nfunction trackTransforms(ctx){var svg=document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');var xform=svg.createSVGMatrix();ctx.getTransform=function(){return xform;};var savedTransforms=[];var save=ctx.save;ctx.save=function(){savedTransforms.push(xform.translate(0,0));return save.call(ctx);};var restore=ctx.restore;ctx.restore=function(){xform=savedTransforms.pop();return restore.call(ctx);};var scale=ctx.scale;ctx.scale=function(sx,sy){xform=xform.scaleNonUniform(sx,sy);return scale.call(ctx,sx,sy);};var rotate=ctx.rotate;ctx.rotate=function(radians){xform=xform.rotate(radians*180/Math.PI);return rotate.call(ctx,radians);};var translate=ctx.translate;ctx.translate=function(dx,dy){xform=xform.translate(dx,dy);return translate.call(ctx,dx,dy);};var transform=ctx.transform;ctx.transform=function(a,b,c,d,e,f){var m2=svg.createSVGMatrix();m2.a=a;m2.b=b;m2.c=c;m2.d=d;m2.e=e;m2.f=f;xform=xform.multiply(m2);return transform.call(ctx,a,b,c,d,e,f);};var setTransform=ctx.setTransform;ctx.setTransform=function(a,b,c,d,e,f){xform.a=a;xform.b=b;xform.c=c;xform.d=d;xform.e=e;xform.f=f;return setTransform.call(ctx,a,b,c,d,e,f);};var pt=svg.createSVGPoint();ctx.transformedPoint=function(x,y){pt.x=x;pt.y=y;return pt.matrixTransform(xform.inverse());};}function StartClock(){redraw();timerId=setTimeout(redraw,500);}StartClock();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this$props=this.props,getData=_this$props.getData,getText=_this$props.getText;getText();getData();console.log(this.props);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Main,{});}}]);return Container;}(Component);export default Container;","map":{"version":3,"sources":["C:/Users/devgu/sohee/sohee/frontend/src/components/Main/container.js"],"names":["React","Component","Main","test1","Container","state","loading","loading2","idx","page","maxpage","componentWillReceiveProps","nextProps","data","props","draw","text","canvas","document","getElementsByTagName","width","body","clientWidth","height","window","innerHeight","image","Array","i","length","Image","src","timerId","first","ctx","getContext","trackTransforms","scale","imagearray","maxarray_x","maxarray_y","randomimage","y","zoomscale","firstx","gappos_x","gappos_y","firsty","redraw","p1","transformedPoint","p2","clearRect","x","font","fillText","j","getImageData","push","randompick","makeRandom","max_x","Math","max","apply","max_y","min_y","min","clientHeight","RandVal","floor","random","console","log","drawImage","addEventListener","rect","getBoundingClientRect","pt","lastX","lastY","open","dragStart","dragged","evt","style","mozUserSelect","webkitUserSelect","userSelect","offsetX","pageX","offsetLeft","offsetY","pageY","offsetTop","translate","clearTimeout","scaleFactor","zoom","clicks","factor","pow","handleScroll","delta","wheelDelta","detail","preventDefault","svg","createElementNS","xform","createSVGMatrix","getTransform","savedTransforms","save","call","restore","pop","sx","sy","scaleNonUniform","rotate","radians","PI","dx","dy","transform","a","b","c","d","e","f","m2","multiply","setTransform","createSVGPoint","matrixTransform","inverse","StartClock","setTimeout","getData","getText"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Main from \"./presenter\";\r\nimport test1 from \"./test_1.jpg\";\r\nclass Container extends Component {\r\n\r\n  state = {\r\n    loading: true,\r\n    loading2: true,\r\n    idx : 1,\r\n    page : [1], \r\n    maxpage : 0,\r\n  };\r\n  static propTypes = {\r\n    data: PropTypes.array,\r\n    text : PropTypes.object,\r\n    getText: PropTypes.func.isRequired,\r\n    getData: PropTypes.func.isRequired,\r\n  };\r\n  \r\n  draw(data,text) {\r\n    var canvas = document.getElementsByTagName('canvas')[0];\r\n          canvas.width = document.body.clientWidth ; canvas.height = window.innerHeight;\r\n          var image = new Array()\r\n          for (var i = 0; i < data.length; i++) {\r\n              image[i] = new Image()\r\n              image[i].src = data[i][\"image\"]\r\n          }\r\n\r\n          var timerId = \"\";\r\n\r\n            var first = true;\r\n            \r\n            \r\n            var ctx = canvas.getContext('2d');\r\n            trackTransforms(ctx);\r\n                var scale = ctx.scale;\r\n                var imagearray = [];\r\n                var maxarray_x = [];\r\n                var maxarray_y = [];\r\n                var randomimage = [];\r\n                var y = 0;\r\n                var zoomscale = 0;\r\n                var firstx = 0;\r\n                var gappos_x  = 0;\r\n                var gappos_y = 0;\r\n                var firsty = 0;\r\n          function redraw(){\r\n            // Clear the entire canvas\r\n            var p1 = ctx.transformedPoint(0,0);\r\n            var p2 = ctx.transformedPoint(canvas.width,canvas.height);\r\n                  \r\n            ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);\r\n                  \r\n            // Alternatively:\r\n            // ctx.save();\r\n            // ctx.setTransform(1,0,0,1,0,0);\r\n            // ctx.clearRect(0,0,canvas.width,canvas.height);\r\n            // ctx.restore();\r\n                  if(first){\r\n                      ctx.font= '70px Calibri';\r\n                      ctx.fillText(text.text,0,70,1000);\r\n      \r\n                      for(var i=0;i<1000;i++){\r\n                          for(var j=0;j<1000;j++){\r\n                              if(ctx.getImageData(i,j,1,1).data[3]==255){\r\n                                  //console.log(i,j);\r\n                                  imagearray.push([i,j]);\r\n                                  maxarray_x.push(i);\r\n                                  maxarray_y.push(j);\r\n                                  var randompick = makeRandom(1,data.length-1);\r\n                                  randomimage.push(randompick);\r\n                              }           \r\n                          }\r\n                      }\r\n                      var max_x = Math.max.apply(null,maxarray_x);\r\n                      var max_y = Math.max.apply(null,maxarray_y);\r\n                      var min_y = Math.min.apply(null,maxarray_y);\r\n                      y = document.body.clientHeight- ((max_y*(3000/max_x*(document.body.clientWidth/3168)))+  (min_y*(3000/max_x*(document.body.clientWidth/3168)))) -50 ;\r\n                      first=false;\r\n                      scale = 3000/max_x*(document.body.clientWidth/3168);\r\n                      zoomscale = scale;\r\n                      firstx = imagearray[0][0]*scale;\r\n                      firsty = imagearray[0][1]*scale;\r\n                  }\r\n                 \r\n                  ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);\r\n                  function makeRandom(min, max){\r\n                      var RandVal = Math.floor(Math.random()*(max-min+1)) + min;\r\n                      return RandVal;\r\n                  }\r\n                  console.log(imagearray.length);\r\n                  for(i=0;i<imagearray.length;i++)\r\n                  {\r\n                    ctx.drawImage(image[randomimage[i]],imagearray[i][0]*scale,imagearray[i][1]*scale+y/2,scale,scale);\r\n                  }\r\n                  \r\n                      \r\n            //\r\n          }\r\n          \r\n          canvas.addEventListener('dblclick', function(){ \r\n      \r\n                  var rect = canvas.getBoundingClientRect();\r\n                  var pt = ctx.transformedPoint(lastX,lastY);\r\n                  for(var i=0;i<imagearray.length;i++)\r\n                  {\r\n                      if(pt.x<imagearray[i][0]*scale+scale && pt.x>imagearray[i][0]*scale){\r\n                          if(pt.y<imagearray[i][1]*scale+y/2+scale && pt.y>imagearray[i][1]*scale+y/2){\r\n                            window.open(data[randomimage[i]][\"url\"], '_blank');\r\n                          }\r\n                      }\r\n                  }\r\n      \r\n              });\r\n          var lastX=canvas.width/2, lastY=canvas.height/2;\r\n          var dragStart,dragged;\r\n          canvas.addEventListener('mousedown',function(evt){\r\n            document.body.style.mozUserSelect = document.body.style.webkitUserSelect = document.body.style.userSelect = 'none';\r\n            lastX = evt.offsetX || (evt.pageX - canvas.offsetLeft);\r\n            lastY = evt.offsetY || (evt.pageY - canvas.offsetTop);\r\n            dragStart = ctx.transformedPoint(lastX,lastY);\r\n                  gappos_x = lastX - firstx;\r\n                  gappos_y = lastY - firsty;\r\n            dragged = false;\r\n          },false);\r\n          canvas.addEventListener('mousemove',function(evt){\r\n            lastX = evt.offsetX || (evt.pageX - canvas.offsetLeft);\r\n            lastY = evt.offsetY || (evt.pageY - canvas.offsetTop);\r\n            dragged = true;\r\n            if (dragStart){\r\n              var pt = ctx.transformedPoint(lastX,lastY);\r\n              ctx.translate(pt.x-dragStart.x,pt.y-dragStart.y);\r\n              redraw();\r\n              clearTimeout(timerId);\r\n            }\r\n          },false);\r\n          canvas.addEventListener('mouseup',function(evt){\r\n            dragStart = null;\r\n      \r\n          },false);\r\n      \r\n          var scaleFactor = 1.1;\r\n              \r\n          var zoom = function(clicks){\r\n            var pt = ctx.transformedPoint(lastX,lastY);\r\n            ctx.translate(pt.x,pt.y);\r\n            var factor = Math.pow(scaleFactor,clicks);\r\n                  zoomscale = zoomscale * factor;\r\n            ctx.scale(factor,factor);\r\n            ctx.translate(-pt.x,-pt.y);\r\n            redraw();\r\n            clearTimeout(timerId);\r\n          }\r\n              \r\n          var handleScroll = function(evt){\r\n                  \r\n            var delta = evt.wheelDelta ? evt.wheelDelta/40 : evt.detail ? -evt.detail : 0;\r\n                  \r\n            if (delta) zoom(delta);\r\n            clearTimeout(timerId);\r\n            return evt.preventDefault() && false;\r\n            \r\n                  \r\n          };\r\n          canvas.addEventListener('DOMMouseScroll',handleScroll,false);\r\n          canvas.addEventListener('mousewheel',handleScroll,false);\r\n        \r\n        \r\n        // Adds ctx.getTransform() - returns an SVGMatrix\r\n        // Adds ctx.transformedPoint(x,y) - returns an SVGPoint\r\n        function trackTransforms(ctx){\r\n          var svg = document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');\r\n          var xform = svg.createSVGMatrix();\r\n          ctx.getTransform = function(){ return xform; };\r\n          \r\n          var savedTransforms = [];\r\n          var save = ctx.save;\r\n          ctx.save = function(){\r\n            savedTransforms.push(xform.translate(0,0));\r\n            return save.call(ctx);\r\n          };\r\n          var restore = ctx.restore;\r\n          ctx.restore = function(){\r\n            xform = savedTransforms.pop();\r\n            return restore.call(ctx);\r\n          };\r\n      \r\n          var scale = ctx.scale;\r\n          ctx.scale = function(sx,sy){\r\n            xform = xform.scaleNonUniform(sx,sy);\r\n            return scale.call(ctx,sx,sy);\r\n          };\r\n          var rotate = ctx.rotate;\r\n          ctx.rotate = function(radians){\r\n            xform = xform.rotate(radians*180/Math.PI);\r\n            return rotate.call(ctx,radians);\r\n          };\r\n          var translate = ctx.translate;\r\n          ctx.translate = function(dx,dy){\r\n            xform = xform.translate(dx,dy);\r\n            return translate.call(ctx,dx,dy);\r\n          };\r\n          var transform = ctx.transform;\r\n          ctx.transform = function(a,b,c,d,e,f){\r\n            var m2 = svg.createSVGMatrix();\r\n            m2.a=a; m2.b=b; m2.c=c; m2.d=d; m2.e=e; m2.f=f;\r\n            xform = xform.multiply(m2);\r\n            return transform.call(ctx,a,b,c,d,e,f);\r\n          };\r\n          var setTransform = ctx.setTransform;\r\n          ctx.setTransform = function(a,b,c,d,e,f){\r\n            xform.a = a;\r\n            xform.b = b;\r\n            xform.c = c;\r\n            xform.d = d;\r\n            xform.e = e;\r\n            xform.f = f;\r\n            return setTransform.call(ctx,a,b,c,d,e,f);\r\n          };\r\n          var pt  = svg.createSVGPoint();\r\n          ctx.transformedPoint = function(x,y){\r\n            pt.x=x; pt.y=y;\r\n            return pt.matrixTransform(xform.inverse());\r\n          }\r\n        }\r\n        function StartClock() {\r\n      \r\n          redraw();\r\n      \r\n          timerId = setTimeout(redraw, 500);\r\n      \r\n        }\r\n        StartClock();\r\n        \r\n        }\r\n\r\n    componentWillReceiveProps = nextProps => {\r\n      const { data } = this.props;\r\n      if ( nextProps.data) {\t\r\n          this.draw(nextProps.data,nextProps.text);\r\n      }\r\n    };\r\n  \r\n\r\n  componentDidMount() {\r\n    const { getData,getText } = this.props;\r\n    getText();\r\n    getData();\r\n    console.log(this.props);\r\n    \r\n};\r\n  render() {\r\n    \r\n    return (\r\n      <Main/>\r\n      \r\n    );\r\n    \r\n  }\r\n}\r\n\r\nexport default Container;"]},"metadata":{},"sourceType":"module"}